{"remainingRequest":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/biaofeng/Desktop/vue/DatePicker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/biaofeng/Desktop/vue/DatePicker.vue","mtime":1601619490869},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAvLyDoh6rlrprkuYnmjIfku6QKICBkaXJlY3RpdmVzOiB7CiAgICAvLyDov5nkuYjlgZrmnInkuIDkuKpidWcg5bCx5pivZGl25piv5Z2X57qn5YWD57SgIOeLrOWNoOS4gOihjCDpnIDopoHmlLnlj5hkaXNwbGF577yaaW5saW5lLWJsb2NrCiAgICAvL+i/mOmcgOimgeaUuei/myDkuIrpnaLkuIDooYzopoHnn63kupsg6ZyA6KaB6KaB5bCG5LiL6Z2i55qEZG9t6ISx56a75paH5qGj5rWBZGlzcGxhee+8mmFic29sdXRlCiAgICAiY2xpY2stb3V0c2lkZSI6IHsKICAgICAgLy8gZWwg5L2/55So6L+Z5Liq5oyH5Luk55qEZG9tIHZub2RlLmNvbnRleHQg5Y+v5Lul5ou/5YiwdnVl5Lit55qE5Ye95pWwCiAgICAgIGJpbmQoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICAgICAgY29uc3Qgdm0gPSB2bm9kZS5jb250ZXh0OwogICAgICAgIGRvY3VtZW50Lm9uY2xpY2sgPSBlID0+IHsKICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0OwogICAgICAgICAgY29uc3QgaXNFbFNvbiA9IGVsLmNvbnRhaW5zKHRhcmdldCk7CiAgICAgICAgICBpZiAoaXNFbFNvbikgewogICAgICAgICAgICAvLyDlpoLmnpx2bS5zaG93UGFuZWzkuLpmYWxzZeaJjeaJp+ihjAogICAgICAgICAgICBpZiAoIXZtLnNob3dQYW5lbCkgewogICAgICAgICAgICAgIHZtLmNoYW5nZVNob3codHJ1ZSk7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInNob3ciKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDkuIDnm7Tngrnlh7vnmoTor50g5LiA55u05omn6KGMCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJzaG93Iik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodm0uc2hvd1BhbmVsKSB7CiAgICAgICAgICAgICAgdm0uY2hhbmdlU2hvdyhmYWxzZSk7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coImhpZGUiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LAogIHByb3BzOiB7CiAgICBkYXRlOiB7CiAgICAgIHR5cGU6IERhdGUsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDlpITnkIbovpPlhaXmoYbmmL7npLrnmoTml6XmnJ8KICAgIGNob29zZURhdGUoKSB7CiAgICAgIGNvbnN0IHt5ZWFyLG1vbnRoLGRhdGV9ID0gdGhpcy5nZXRZYWVyTW9udGhEYXkodGhpcy5kYXRlKTsKICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF0ZX1gOwogICAgfSwKICAgIHNob3dEYXkoKXsKICAgICAgY29uc3QgcmVzQXJyID0gW107CiAgICAgIGxldCB7eWVhcixtb250aH0gPSB0aGlzLnNob3dEYXRlOwogICAgIAogICAgICBtb250aCA9IHBhcnNlSW50KG1vbnRoKTsKICAgICAgLy9tb250aOWKoOS6hjEg6L+Z6YeM6KaB5YeP5LiA5LiqMQogICAgICBjb25zdCBzdGFydERheSA9IG5ldyBEYXRlKHllYXIsbW9udGgtMSwxKTsgCiAgICAgIGNvbnN0IHdlZWsgPSBzdGFydERheS5nZXREYXkoKTsKICAgICAgY29uc3QgZmlyc3REYXkgPSBzdGFydERheSAtIHdlZWsgKiAyNCAqIDYwICogNjAgKiAxMDAwOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgNDI7aSsrKXsKICAgICAgICByZXNBcnIucHVzaChuZXcgRGF0ZShmaXJzdERheSArIGkgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc0FycjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5YWz5LqO6K+m57uG5pel5pyf55qE5pi+56S66Zeu6aKY77yM55yL5oiR5Lus54K55Ye755qE5rqQ5a+56LGh5piv5ZCm5Y+R55Sf5Zyo5pel5pyf57uE5Lu255qE5LiK6Z2iCiAgICBjaGFuZ2VTaG93KGZsYWcpIHsKICAgICAgdGhpcy5zaG93UGFuZWwgPSBmbGFnOwogICAgfSwKICAgIGdldHNob3dEYXRlKCkgewogICAgICBjb25zdCB7eWVhcixtb250aCxkYXRlfSA9IHRoaXMuZ2V0WWFlck1vbnRoRGF5KHRoaXMuZGF0ZSk7CiAgICAgIHRoaXMuc2hvd0RhdGUgPSB7CiAgICAgICAgeWVhciwKICAgICAgICBtb250aCwKICAgICAgICBkYXRlCiAgICAgIH07CiAgICB9LAogICAgZ2V0WWFlck1vbnRoRGF5KGRhdGVzKSB7CiAgICAgIGNvbnN0IHllYXIgPSBkYXRlcwogICAgICAgIC5nZXRGdWxsWWVhcigpCiAgICAgICAgLnRvU3RyaW5nKCkKICAgICAgICAucGFkU3RhcnQoNCwgIjAiKTsKICAgICAgY29uc3QgbW9udGggPSAoZGF0ZXMuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgIjAiKTsKICAgICAgY29uc3QgZGF0ZSA9IGRhdGVzLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICIwIik7CiAgICAgIHJldHVybiB7CiAgICAgICAgeWVhciwKICAgICAgICBtb250aCwKICAgICAgICBkYXRlCiAgICAgIH07CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1BhbmVsOiBmYWxzZSwKICAgICAgc2hvd0RhdGU6IHsKICAgICAgICB5ZWFyOiAwLAogICAgICAgIG1vbnRoOiAwLAogICAgICAgIGRhdGU6IDAKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldHNob3dEYXRlKCk7CiAgfQp9Owo="},{"version":3,"sources":["DatePicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DatePicker.vue","sourceRoot":".","sourcesContent":["<template>\n  <div class=\"datePicker\" v-click-outside>\n    <div class=\"input\">\n      <span>\n        <i class=\"iconfont icon-date\"></i>\n      </span>\n      <input type=\"text\" :value=\"chooseDate\" />\n    </div>\n    <div class=\"picker\" v-if=\"showPanel\">\n      <!-- 小尖尖 连接 -->\n      <div class=\"picker-allow\"></div>\n      <div class=\"picker-header\">\n        <span class=\"iconfont icon-prev-year picker-btn\" />\n        <span class=\"iconfont icon-prev-month picker-btn\" />\n        <span class=\"date\">{{showDate.year}}年{{showDate.month}}月</span>\n        <span class=\"iconfont icon-next-month picker-btn\" />\n        <span class=\"iconfont icon-next-year picker-btn\" />\n      </div>\n      <div class=\"picker-body\">\n        <div class=\"picker-week\">\n          <div v-for=\"week in ['日','一','二','三','四','五','六']\" :key=\"week\">{{ week }}</div>\n        </div>\n        <div class=\"picker-day\">\n          <div v-for=\"date in showDay\" :key=\"date.getTime()\">{{ date.getDate() }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // 自定义指令\n  directives: {\n    // 这么做有一个bug 就是div是块级元素 独占一行 需要改变display：inline-block\n    //还需要改进 上面一行要短些 需要要将下面的dom脱离文档流display：absolute\n    \"click-outside\": {\n      // el 使用这个指令的dom vnode.context 可以拿到vue中的函数\n      bind(el, binding, vnode) {\n        const vm = vnode.context;\n        document.onclick = e => {\n          const target = e.target;\n          const isElSon = el.contains(target);\n          if (isElSon) {\n            // 如果vm.showPanel为false才执行\n            if (!vm.showPanel) {\n              vm.changeShow(true);\n              // console.log(\"show\");\n            }\n            // 一直点击的话 一直执行\n            // console.log(\"show\");\n          } else {\n            if (vm.showPanel) {\n              vm.changeShow(false);\n              // console.log(\"hide\");\n            }\n          }\n        };\n      }\n    }\n  },\n  props: {\n    date: {\n      type: Date,\n      default() {\n        return new Date();\n      }\n    }\n  },\n  computed: {\n    // 处理输入框显示的日期\n    chooseDate() {\n      const {year,month,date} = this.getYaerMonthDay(this.date);\n      return `${year}-${month}-${date}`;\n    },\n    showDay(){\n      const resArr = [];\n      let {year,month} = this.showDate;\n     \n      month = parseInt(month);\n      //month加了1 这里要减一个1\n      const startDay = new Date(year,month-1,1); \n      const week = startDay.getDay();\n      const firstDay = startDay - week * 24 * 60 * 60 * 1000;\n      for(let i = 0; i < 42;i++){\n        resArr.push(new Date(firstDay + i * 24 * 60 * 60 * 1000));\n      }\n      return resArr;\n    }\n  },\n  methods: {\n    //关于详细日期的显示问题，看我们点击的源对象是否发生在日期组件的上面\n    changeShow(flag) {\n      this.showPanel = flag;\n    },\n    getshowDate() {\n      const {year,month,date} = this.getYaerMonthDay(this.date);\n      this.showDate = {\n        year,\n        month,\n        date\n      };\n    },\n    getYaerMonthDay(dates) {\n      const year = dates\n        .getFullYear()\n        .toString()\n        .padStart(4, \"0\");\n      const month = (dates.getMonth() + 1).toString().padStart(2, \"0\");\n      const date = dates.getDate().toString().padStart(2, \"0\");\n      return {\n        year,\n        month,\n        date\n      };\n    }\n  },\n  data() {\n    return {\n      showPanel: false,\n      showDate: {\n        year: 0,\n        month: 0,\n        date: 0\n      }\n    };\n  },\n  created() {\n    this.getshowDate();\n  }\n};\n</script>\n\n<style scoped>\n@import \"./assets/font.css\";\n.datePicker {\n  /* 解决点击显示div独占一行的问题 */\n  display: inline-block;\n  /* background-color: red; */\n}\n.datePicker .input input {\n  height: 40px;\n  line-height: 40px;\n  padding: 0 30px;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  outline: none;\n  cursor: pointer;\n  background-color: #fff;\n}\n.datePicker .input {\n  position: relative;\n}\n.datePicker .input span {\n  position: absolute;\n  /* background-color: red; */\n  height: 100%;\n  line-height: 40px;\n  left: 5px;\n  width: 25px;\n  /* 文本居中 */\n  text-align: center;\n  /* 日历图标的颜色 */\n  color: #c0c4cc;\n}\n.picker {\n  width: 322px;\n  height: 329px;\n  border: 1px solid #e4e7ed;\n  border-radius: 4px;\n  margin-top: 5px;\n  /* x y blur spread */\n  box-shadow: 0px 2px 12px 0px rgba(0, 0, 0, 0.1);\n  /* 防止用这个组件时有背景颜色的干扰 */\n  background-color: #fff;\n  /* 解决显示问题 */\n  /* position: relative; */\n  position: absolute;\n}\n.picker .picker-allow {\n  width: 0px;\n  height: 0px;\n  border: 6px solid transparent;\n  border-bottom-color: #e4e7ed;\n  position: absolute;\n  top: -12px;\n  left: 30px;\n}\n.picker .picker-allow::after {\n  content: \"\";\n  display: block;\n  width: 0px;\n  height: 0px;\n  border: 6px solid transparent;\n  border-bottom-color: #fff;\n  position: absolute;\n  top: -5px;\n  left: -6px;\n}\n.picker .picker-header {\n  padding-top: 15px;\n  padding-bottom: 10px;\n  /* border-bottom: 1px solid #e4e7ed; */\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n}\n.picker .picker-header .picker-btn {\n  margin: 0 5px;\n  font-size: 12px;\n  color: #303133;\n  cursor: pointer;\n}\n.picker .picker-header .date {\n  margin: 0 40px;\n  user-select: none;\n}\n.picker-body {\n  padding: 0px 10px 10px 10px;\n  /* 用户不能选中 */\n  user-select: none;\n  color: #606266;\n}\n.picker-body .picker-week {\n  display: flex;\n  justify-content: space-around;\n  height: 40px;\n  line-height: 40px;\n  border-bottom: 1px solid #ebeef5;\n}\n.picker-body .picker-day {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n.picker-body .picker-day div {\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n  text-align: center;\n  /* background: red;  */\n  cursor: pointer;\n  font-size: 14px;\n  margin: 4px 6px;\n}\n.picker-body .picker-day div:hover {\n  color: #4091ff;\n}\n.picker-body .picker-day div.is-today {\n  color: #4091ff;\n  font-weight: 700;\n}\n.picker-body .picker-day div.is-select {\n  background-color: #4091ff;\n  color: #fff;\n  border-radius: 50%;\n}\n.picker-body .picker-day div.other-month {\n  color: #c0c4cc;\n}\n</style>"]}]}